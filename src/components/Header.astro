---
interface Props {
  minimal?: boolean;
}

const { minimal = false } = Astro.props;
---

<header class="sticky top-0 z-50 w-full backdrop-blur-md bg-white/80 dark:bg-slate-900/80 border-b border-gray-200 dark:border-gray-800 transition-colors duration-300">
  <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="font-bold text-xl sm:text-2xl bg-gradient-to-r from-blue-600 to-cyan-500 bg-clip-text text-transparent hover:opacity-80 transition-opacity">
      RC
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden md:flex items-center gap-8">
      <a href="/" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-cyan-400 transition-colors font-medium">
        Home
      </a>
      <a href="/portfolio" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-cyan-400 transition-colors font-medium">
        Portfolio
      </a>
      <a href="/blog" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-cyan-400 transition-colors font-medium">
        Blog
      </a>
      <a href="/resume" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-cyan-400 transition-colors font-medium">
        Resume
      </a>
      <a href="/about" class="text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-cyan-400 transition-colors font-medium">
        About
      </a>
    </div>

    <!-- Theme Toggle & Mobile Menu -->
    <div class="flex items-center gap-4">
      <button
        id="theme-toggle"
        class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-yellow-500 dark:text-blue-300"
        aria-label="Toggle theme"
        title="Toggle dark mode"
      >
        <span class="text-xl dark:hidden">‚òÄÔ∏è</span>
        <span class="text-xl hidden dark:block">üåô</span>
      </button>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-2xl"
        aria-label="Toggle mobile menu"
      >
        <span id="menu-icon">‚ò∞</span>
        <span id="close-icon" class="hidden">‚úï</span>
      </button>
    </div>
  </nav>
</header>

<script>
  // Dark mode toggle
  const themeToggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  // Load theme from localStorage or system preference
  function loadTheme() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      if (savedTheme === 'dark') {
        html.classList.add('dark');
      } else {
        html.classList.remove('dark');
      }
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      html.classList.add('dark');
    }
  }

  loadTheme();

  themeToggle?.addEventListener('click', () => {
    html.classList.toggle('dark');
    const isDark = html.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });

  // Mobile menu toggle
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  const mobileNav = document.getElementById('mobile-nav');

  mobileMenuBtn?.addEventListener('click', () => {
    const isOpen = mobileNav?.classList.contains('translate-x-0');
    if (isOpen) {
      mobileNav?.classList.remove('translate-x-0');
      mobileNav?.classList.add('translate-x-full');
      menuIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
    } else {
      mobileNav?.classList.add('translate-x-0');
      mobileNav?.classList.remove('translate-x-full');
      menuIcon?.classList.add('hidden');
      closeIcon?.classList.remove('hidden');
    }
  });

  // Close menu when clicking on a link
  const mobileLinks = document.querySelectorAll('#mobile-nav a');
  mobileLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileNav?.classList.remove('translate-x-0');
      mobileNav?.classList.add('translate-x-full');
      menuIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
    });
  });
</script>
